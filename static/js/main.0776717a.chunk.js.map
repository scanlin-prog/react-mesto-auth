{"version":3,"sources":["images/Mesto.svg","images/Success.svg","images/Fail.svg","context/CurrentUserContext.js","utils/Api.js","components/Header.js","utils/Auth.js","components/Login.js","components/Register.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","components/InfoTooltip.js","components/ProtectedRoute.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","CurrentUserContext","React","createContext","api","options","this","_baseurl","baseUrl","_headers","headers","response","ok","json","console","log","Promise","reject","statusText","fetch","then","_handleResponse","data","method","body","JSON","stringify","id","like","link","avatar","localStorage","getItem","Header","props","className","src","logo","alt","children","to","sign","onClick","handleLogout","signLink","BASE_URL","handleResponce","Login","useState","email","setEmail","password","setPassword","onSubmit","evt","preventDefault","auth","token","setItem","handleLogin","catch","alert","required","onChange","value","target","name","type","placeholder","Register","setName","about","setAbout","setAvatar","history","useHistory","res","openInfoTooltip","push","Card","currentUser","useContext","isOwn","card","owner","_id","cardRemoveButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","onCardClick","onCardLike","length","onCardDelete","Main","user","onEditAvatar","onEditProfile","onAddPlace","cards","map","key","Footer","PopupWithForm","isOpen","noValidate","title","titleButton","onClose","EditProfilePopup","description","setDescription","useEffect","onUpdateUser","minLength","maxLength","EditAvatarPopup","inputRef","useRef","onUpdateAvatar","current","ref","AddPlacePopup","inputNameRef","inputLinkRef","ImagePopup","InfoTooltip","infoPopup","image","success","fail","text","ProtectedRoute","Component","component","loggedIn","App","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isInfoTooltip","setInfoTooltip","undefined","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","setInfoPopup","closeAllPopups","tokenCheck","getProfileData","result","err","getCardsData","Provider","path","removeItem","dataCard","toggleLikeCard","newCard","newCards","c","deleteCard","filter","boolean","setTimeout","exact","sendProfileData","sendCardData","changeAvatar","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.0776717a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Mesto.c6f11019.svg\";","module.exports = __webpack_public_path__ + \"static/media/Success.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/Fail.4072126c.svg\";","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();","class Api {\r\n    constructor(options) {\r\n        this._baseurl = options.baseUrl;\r\n        this._headers = options.headers;\r\n    }\r\n\r\n    _handleResponse(response) {\r\n        if (response.ok) {\r\n            return response.json();\r\n        } else {\r\n            console.log('_handleResponse rejection')\r\n            return Promise.reject(response.statusText)\r\n        }\r\n    }\r\n\r\n    getProfileData() {\r\n        return fetch(`${this._baseurl}/users/me`, { headers: this._headers })\r\n            .then(this._handleResponse)\r\n    }\r\n\r\n    sendProfileData(data) {\r\n        return fetch(`${this._baseurl}/users/me`, {\r\n            headers: this._headers,\r\n            method: 'PATCH',\r\n            body: JSON.stringify(data)\r\n        })\r\n            .then(this._handleResponse)\r\n    }\r\n\r\n    getCardsData() {\r\n        return fetch(`${this._baseurl}/cards`, { headers: this._headers })\r\n            .then(this._handleResponse)\r\n    }\r\n\r\n    sendCardData(data) {\r\n        return fetch(`${this._baseurl}/cards`, {\r\n            headers: this._headers,\r\n            method: 'POST',\r\n            body: JSON.stringify(data)\r\n        })\r\n            .then(this._handleResponse)\r\n    }\r\n\r\n    toggleLikeCard(id, like) {\r\n        return fetch(`${this._baseurl}/cards/${id}/likes`, {\r\n            headers: this._headers,\r\n            method: like ? 'PUT' : 'DELETE'\r\n        })\r\n            .then(this._handleResponse)\r\n    }\r\n\r\n    deleteCard(id) {\r\n        return fetch(`${this._baseurl}/cards/${id}`, {\r\n            headers: this._headers,\r\n            method: 'DELETE'\r\n        })\r\n            .then(this._handleResponse)\r\n    }\r\n\r\n    changeAvatar({link}) {\r\n        return fetch(`${this._baseurl}/users/me/avatar`, {\r\n            headers: this._headers,\r\n            method: 'PATCH',\r\n            body: JSON.stringify({\r\n                avatar: link\r\n            })\r\n        })\r\n            .then(this._handleResponse)\r\n    }\r\n}\r\n\r\nexport const api = new Api({\r\n    baseUrl: 'http://localhost:3001',\r\n    headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n        'Content-Type': 'application/json'\r\n    }\r\n})\r\n","import React from 'react';\r\nimport logo from '../images/Mesto.svg';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Header(props) {\r\n    return (\r\n        <>\r\n            <header className=\"header\">\r\n                <img className=\"header__logo\" src={logo} alt=\"Место\" />\r\n                <div className=\"header__profile\">\r\n                    {props.children}\r\n                    <Link to={props.sign} onClick={props.handleLogout} className=\"header__link\">{props.signLink}</Link>\r\n                </div>\r\n            </header>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Header","export const BASE_URL = 'http://localhost:3001';\r\n\r\nfunction handleResponce(response) {\r\n    if (response.ok) {\r\n        return response.json();\r\n    } else {\r\n        console.log('_handleResponse rejection')\r\n        return Promise.reject(response.statusText)\r\n    }\r\n}\r\n\r\nexport const register = (email, password, name, about, avatar) => {\r\n    return fetch(`${BASE_URL}/signup`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({email, password, name, about, avatar})\r\n    })\r\n        .then(handleResponce)\r\n}\r\n\r\nexport const authorize = (email, password) => {\r\n    return fetch(`${BASE_URL}/signin`, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({email, password})\r\n    })\r\n        .then(handleResponce)\r\n}\r\n\r\nexport const checkToken = (token) => {\r\n    return fetch(`${BASE_URL}/users/me`, {\r\n        method: 'GET',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`,\r\n        }\r\n    })\r\n    .then(handleResponce)\r\n}","import React from 'react';\r\nimport Header from './Header';\r\nimport { Link } from 'react-router-dom';\r\nimport * as auth from '../utils/Auth';\r\n\r\nfunction Login(props) {\r\n    const [email, setEmail] = React.useState('');\r\n    const [password, setPassword] = React.useState('');\r\n\r\n    function resetForm() {\r\n        setEmail('');\r\n        setPassword('');\r\n    }\r\n\r\n    function handleChangeEmail(evt) {\r\n        const { value } = evt.target;\r\n        setEmail(value)\r\n    }\r\n\r\n    function handleChangePassword(evt) {\r\n        const { value } = evt.target;\r\n        setPassword(value)\r\n    }\r\n\r\n    function handleSubmit(evt) {\r\n        evt.preventDefault();\r\n        if (!email || !password) {\r\n            alert('Неверный email или пароль')\r\n            return;\r\n        }\r\n        auth.authorize(email, password)\r\n            .then((data) => {\r\n                if (data.token) {\r\n                    localStorage.setItem('token', data.token);\r\n                    props.handleLogin();\r\n                    resetForm();\r\n                } else {\r\n                    return\r\n                }\r\n            })\r\n            .catch(() => alert(401 && 'Пользователь с email не найден'))\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <Header sign={'/sign-up'} signLink={'Регистрация'} />\r\n            <div className=\"login\">\r\n                <p className=\"login__welcome\">\r\n                    Вход\r\n                </p>\r\n                <form onSubmit={handleSubmit} className=\"login__form\">\r\n                    <input required className=\"login__input\" onChange={handleChangeEmail} name=\"email\" type=\"email\" placeholder=\"Email\" />\r\n                    <input required className=\"login__input\" onChange={handleChangePassword} name=\"password\" type=\"password\" placeholder=\"Пароль\" />\r\n                    <button type=\"submit\" className=\"login__link\">Войти</button>\r\n                </form>\r\n                <div className=\"login__signup\">\r\n                    <p>Ещё не зарегистрированы?</p>\r\n                    <Link to={'/sign-up'} className=\"login__signup-link\">Регистрация</Link>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Login;","import React from 'react';\r\nimport Header from './Header';\r\nimport { useHistory, Link } from 'react-router-dom';\r\nimport * as auth from '../utils/Auth';\r\n\r\n\r\nfunction Register(props) {\r\n    const [email, setEmail] = React.useState('')\r\n    const [password, setPassword] = React.useState('')\r\n    const [name, setName] = React.useState('')\r\n    const [about, setAbout] = React.useState('')\r\n    const [avatar, setAvatar] = React.useState('')\r\n    const history = useHistory();\r\n\r\n    function handleChangeEmail(evt) {\r\n        const { value } = evt.target;\r\n        setEmail(value)\r\n    }\r\n\r\n    function handleChangePassword(evt) {\r\n        const { value } = evt.target;\r\n        setPassword(value)\r\n    }\r\n\r\n    function handleChangeName(evt) {\r\n        const { value } = evt.target;\r\n        setName(value)\r\n    }\r\n\r\n    function handleChangeAbout(evt) {\r\n        const { value } = evt.target;\r\n        setAbout(value)\r\n    }\r\n\r\n    function handleChangeAvatar(evt) {\r\n        const { value } = evt.target;\r\n        setAvatar(value)\r\n    }\r\n\r\n\r\n    function handleSubmit(evt) {\r\n        evt.preventDefault();\r\n        auth.register(email, password, name, about, avatar)\r\n        .then((res) => {\r\n            if(res) {\r\n                props.openInfoTooltip(true, 'Вы успешно зарегистрировались!')\r\n                history.push('/sign-in');\r\n            } else {\r\n                props.openInfoTooltip(false, 'Что-то пошло не так! Попробуйте еще раз.')\r\n            }\r\n        })\r\n        .catch(() => alert(400 && 'Некорректно заполнено одно из полей'))\r\n    }\r\n\r\n    return(\r\n        <>\r\n            <Header sign={'/sign-in'} signLink={'Войти'} />\r\n            <div className=\"login\">\r\n                <p className=\"login__welcome\">\r\n                    Регистрация\r\n                </p>\r\n                <form onSubmit={handleSubmit} className=\"login__form\">\r\n                    <input required className=\"login__input\" onChange={handleChangeEmail} name=\"email\" type=\"email\" placeholder=\"Email\" />\r\n                    <input required className=\"login__input\" onChange={handleChangePassword} name=\"password\" type=\"password\" placeholder=\"Пароль\" />\r\n                    <input required className=\"login__input\" onChange={handleChangeName} name=\"name\" type=\"text\" placeholder=\"Имя\" />\r\n                    <input required className=\"login__input\" onChange={handleChangeAbout} name=\"about\" type=\"text\" placeholder=\"О себе\" />\r\n                    <input required className=\"login__input\" onChange={handleChangeAvatar} name=\"avatar\" type=\"url\" placeholder=\"Ссылка на аватар\" />\r\n                    <button type=\"submit\" className=\"login__link\">Зарегистрироваться</button>\r\n                </form>\r\n                <div className=\"login__signup\">\r\n                    <p>Уже зарегистрированы?</p>\r\n                    <Link to={'/sign-in'} className=\"login__signup-link\">Войти</Link>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Register;","import React from 'react';\r\nimport { CurrentUserContext } from '../context/CurrentUserContext.js';\r\n\r\nfunction Card(props) {\r\n\r\n    const currentUser = React.useContext(CurrentUserContext)\r\n    const isOwn = props.card.owner._id === currentUser._id;\r\n    const cardRemoveButtonClassName = (\r\n        `place__button-remove ${isOwn ? 'place__button-remove_active' : ''}`\r\n    )\r\n\r\n    const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n    const cardLikeButtonClassName = `place__button-like ${isLiked ? 'place__button-like_active' : ''}`\r\n    \r\n    function handleClick() {\r\n        props.onCardClick(props.card);\r\n    }\r\n\r\n    function handleLikeClick() {\r\n        props.onCardLike(props.card);\r\n    }\r\n\r\n    function handleDeleteClick() {\r\n        props.onCardDelete(props.card);\r\n    }\r\n\r\n    return (\r\n\r\n        <div className=\"place\">\r\n            <img className=\"place__image\" src={props.card.link} onClick={handleClick} alt=\"Изображение\" />\r\n            <h3 className=\"place__title\">{props.card.name}</h3>\r\n            <div className=\"place__field-like\">\r\n                <button className={cardLikeButtonClassName} type=\"button\" onClick={handleLikeClick}></button>\r\n                <p className=\"place__button-like-number\">{props.card.likes.length}</p>\r\n            </div>\r\n            <button className={cardRemoveButtonClassName} type=\"button\" onClick={handleDeleteClick}></button>\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Card","import React from 'react';\r\nimport Card from './Card.js';\r\nimport Header from './Header.js';\r\nimport { CurrentUserContext } from '../context/CurrentUserContext.js';\r\n\r\nfunction Main(props) {\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n    return (\r\n        <>\r\n            <Header sign={'/sign-in'} signLink={'Выйти'} handleLogout={props.handleLogout} >\r\n                <p className=\"header__nickname\">{props.user.email}</p>\r\n            </Header>\r\n            <main className=\"content\">\r\n                <section className=\"profile\">\r\n                    <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Лицо\" />\r\n                    <div className=\"profile__overlay\" onClick={props.onEditAvatar}></div>\r\n                    <div className=\"profile__info\">\r\n                        <div className=\"profile__info-heading\">\r\n                            <h1 className=\"profile__info-title\">{currentUser.name}</h1>\r\n                            <button className=\"profile__button-edit\" onClick={props.onEditProfile} type=\"button\"></button>\r\n                        </div>\r\n                        <p className=\"profile__info-subtitle\">{currentUser.about}</p>\r\n                    </div>\r\n                    <button className=\"profile__button-add\" onClick={props.onAddPlace} type=\"button\"></button>\r\n                </section>\r\n                <section className=\"places\">\r\n                    {\r\n                        props.cards.map((card) => {\r\n\r\n                            return (\r\n                                <Card card={card} key={card._id} onCardClick={props.onCardClick} onCardLike={props.onCardLike} onCardDelete={props.onCardDelete} />\r\n                            )\r\n                        })\r\n                    }\r\n                </section>\r\n            </main>\r\n        </>\r\n    )\r\n\r\n\r\n}\r\n\r\nexport default Main\r\n\r\n\r\n","import React from 'react';\r\n\r\nfunction Footer() {\r\n    return(\r\n        <footer className=\"footer\">\r\n            <p className=\"footer__copyright\">&copy; 2020. Иван Ротарь</p>\r\n        </footer>\r\n    )\r\n}\r\n\r\nexport default Footer","import React from 'react';\r\n\r\nfunction PopupWithForm(props) {\r\n    return(\r\n        <div className={`popup ${props.isOpen ? \"popup_opened\" : \"\"}`} id={`popup-${props.name}`}>\r\n            <form className=\"popup__container\" name=\"popup-window\" onSubmit={props.onSubmit} noValidate>\r\n                <h3 className=\"popup__title\">{props.title}</h3>\r\n                {props.children}\r\n                <button className=\"popup__button-create\">{props.titleButton}</button>\r\n                <button className=\"popup__button-close\" type=\"button\" onClick={props.onClose}></button>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PopupWithForm;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport { CurrentUserContext } from '../context/CurrentUserContext.js';\r\n\r\nfunction EditProfilePopup(props) {\r\n\r\n    const [name, setName] = React.useState('');\r\n    const [description, setDescription] = React.useState('');\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n    }, [currentUser, props.isOpen]);\r\n\r\n    function handleChangeName(evt) {\r\n        setName(evt.target.value);\r\n    }\r\n\r\n    function handleChangeDescription(evt) {\r\n        setDescription(evt.target.value);\r\n    }\r\n\r\n    function handleSubmit(evt) {\r\n        evt.preventDefault();\r\n\r\n        props.onUpdateUser({\r\n            name,\r\n            about: description,\r\n        });\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm name=\"edit\" title=\"Редактировать\" titleButton=\"Сохранить\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\r\n            <label className=\"popup__field\">\r\n                <input type=\"text\" value={name || ''} onChange={handleChangeName} className=\"popup__input popup__input_first\" id=\"name-input\" placeholder=\"Имя\" name=\"name\"\r\n                    required minLength=\"2\" maxLength=\"40\" />\r\n                <span className=\"popup__input-error\" id=\"name-input-error\"></span>\r\n            </label>\r\n            <label className=\"popup__field\">\r\n                <input type=\"text\" value={description || ''} onChange={handleChangeDescription} className=\"popup__input popup__input_second\" id=\"job-input\" placeholder=\"О себе\"\r\n                    name=\"about\" required minLength=\"2\" maxLength=\"200\" />\r\n                <span className=\"popup__input-error\" id=\"job-input-error\"></span>\r\n            </label>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditProfilePopup\r\n\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction EditAvatarPopup(props) {\r\n\r\n    const inputRef = React.useRef();\r\n\r\n    function handleSubmit(evt) {\r\n        evt.preventDefault();\r\n\r\n        props.onUpdateAvatar({\r\n            \r\n            link: inputRef.current.value,\r\n        });\r\n\r\n\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm name=\"avatar\" title=\"Обновить аватар\" titleButton=\"Сохранить\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\r\n            <label className=\"popup__field\">\r\n                <input type=\"url\" className=\"popup__input popup__input_second\" id=\"url-input\"\r\n                    placeholder=\"Ссылка на картинку\" name=\"link\" ref={inputRef} required />\r\n                <span className=\"popup__input-error\" id=\"url-input-error\"></span>\r\n            </label>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\n\r\nfunction AddPlacePopup(props) {\r\n\r\n    const inputNameRef = React.useRef();\r\n    const inputLinkRef = React.useRef();\r\n\r\n    function handleSubmit(evt) {\r\n        evt.preventDefault();\r\n\r\n        props.onAddPlace({\r\n            name: inputNameRef.current.value,\r\n            link: inputLinkRef.current.value\r\n        });\r\n    }\r\n\r\n    return(\r\n        <PopupWithForm name=\"add\" title=\"Новое место\" titleButton=\"Создать\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\r\n            <label className=\"popup__field\">\r\n                <input type=\"text\" className=\"popup__input popup__input_first\" id=\"title-input\" placeholder=\"Название\"\r\n                    name=\"name\" ref={inputNameRef} required minLength=\"1\" maxLength=\"30\" />\r\n                <span className=\"popup__input-error\" id=\"title-input-error\"></span>\r\n            </label>\r\n            <label className=\"popup__field\">\r\n                <input type=\"url\" className=\"popup__input popup__input_second\" id=\"url-input\"\r\n                    placeholder=\"Ссылка на картинку\" name=\"link\" ref={inputLinkRef} required />\r\n                <span className=\"popup__input-error\" id=\"url-input-error\"></span>\r\n            </label>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\r\n\r\nfunction ImagePopup(props) {\r\n    return(\r\n        <div className={`popup ${props.card && 'popup_opened'}`} id=\"popup-image\">\r\n            <div className=\"popup__container-image\">\r\n                <p className=\"popup__image-title\">{props.card ? props.card.name : ''}</p>\r\n                <img className=\"popup__image\" src={props.card ? props.card.link : ''} alt=\"Изображение\" />\r\n                <button className=\"popup__button-close popup__button-close_theme_image\" onClick={props.onClose} type=\"button\"></button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ImagePopup;","import React from 'react';\r\nimport success from '../images/Success.svg';\r\nimport fail from '../images/Fail.svg';\r\n\r\nfunction InfoTooltip(props) {\r\n    return (\r\n        <div className={`popup ${props.isOpen ? \"popup_opened\" : \"\"}`}>\r\n            <div className=\"popup__container\">\r\n                <img className=\"popup__info-image\" src={props.infoPopup.image ? success : fail} alt=\"Изображение\" />\r\n                <p className=\"popup__info-title\">{props.infoPopup.text}</p>\r\n                <button className=\"popup__button-close\" onClick={props.onClose} type=\"button\"></button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default InfoTooltip;","import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\r\n      }\r\n    </Route>\r\n)}\r\n\r\nexport default ProtectedRoute;","import React from 'react';\nimport { CurrentUserContext } from '../context/CurrentUserContext.js';\nimport { api } from '../utils/Api.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport ImagePopup from './ImagePopup.js';\nimport InfoTooltip from './InfoTooltip.js';\nimport { Redirect, Route, Switch, useHistory } from 'react-router-dom';\nimport ProtectedRoute from './ProtectedRoute';\nimport * as auth from '../utils/Auth';\n\nfunction App() {\n\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isInfoTooltip, setInfoTooltip] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState(undefined);\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [infoPopup, setInfoPopup] = React.useState({});\n\n  const history = useHistory();\n\n  React.useEffect(() => {\n    tokenCheck();\n    api.getProfileData()\n      .then((result) => {\n        setCurrentUser(result);\n      }).catch((err) => {\n        console.log(err)\n      })\n\n    api.getCardsData()\n      .then((result) => {\n        setCards(result)\n      }).catch((err) => {\n        console.log(err)\n      })\n  }, [])\n\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(dataCard) {\n    setSelectedCard(dataCard);\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.toggleLikeCard(card._id, !isLiked)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        setCards(newCards);\n      }).catch((err) => {\n        console.log(err)\n      })\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n      .then(() => {\n        const newCards = cards.filter((c) => c._id !== card._id);\n        setCards(newCards);\n      }).catch((err) => {\n        console.log(err)\n      })\n  }\n\n  function handleUpdateUser(data) {\n    api.sendProfileData(data)\n      .then((result) => {\n        setCurrentUser(result);\n        closeAllPopups();\n      }).catch((err) => {\n        console.log(err)\n      })\n  }\n\n  function handleUpdateAvatar(data) {\n    api.changeAvatar(data)\n      .then((result) => {\n        setCurrentUser(result);\n        closeAllPopups();\n      }).catch((err) => {\n        console.log(err)\n      })\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api.sendCardData(data)\n    .then((newCard) => {\n      setCards([newCard, ...cards]);\n      closeAllPopups();\n    }).catch((err) => {\n      console.log(err)\n    })\n  }\n\n  function closeAllPopups() {\n    setEditProfilePopupOpen(false);\n    setEditAvatarPopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setSelectedCard(undefined);\n    setInfoTooltip(false)\n  }\n\n  function handleLogin() {\n    tokenCheck()\n  }\n  \n  function handleLogout() {\n    localStorage.removeItem('token')\n    setLoggedIn(false)\n  }\n\n  function tokenCheck() {\n    let token = localStorage.getItem('token');\n    if (token) {\n      auth.checkToken(token)\n        .then((res) => {\n          if (res) {\n            setLoggedIn(true);\n            setCurrentUser(res)\n            history.push('/main');\n          }\n        })\n        .catch(() => {\n          alert(401 && 'Переданный токен некорректен')\n        })\n    }\n  }\n\n  function openInfoTooltip(boolean, text) {\n    setInfoPopup({\n      image: boolean,\n      text: text\n    })\n    setTimeout(setInfoTooltip, 300, true)\n  }\n\n  return (\n    <div className=\"page\">\n      <CurrentUserContext.Provider value={currentUser}>\n        <Switch>\n          <ProtectedRoute path=\"/main\" loggedIn={loggedIn} user={currentUser} component={Main} handleLogout={handleLogout} onEditProfile={handleEditProfileClick} onAddPlace={handleAddPlaceClick} onEditAvatar={handleEditAvatarClick} onCardClick={handleCardClick} cards={cards} onCardLike={handleCardLike} onCardDelete={handleCardDelete} />\n          <Route path=\"/sign-up\">\n            <Register openInfoTooltip={openInfoTooltip} />\n          </Route>\n          <Route path=\"/sign-in\">\n            <Login handleLogin={handleLogin} />\n          </Route>\n          <Route exact path=\"/\">\n            {loggedIn ? <Redirect to=\"/main\" /> : <Redirect to=\"/sign-in\" />}\n          </Route>\n        </Switch>\n        <Footer />\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\n        <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} />\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\n        <PopupWithForm name=\"confirm\" title=\"Вы уверены?\" titleButton=\"Да\"></PopupWithForm>\n        <ImagePopup card={selectedCard} onClose={closeAllPopups}></ImagePopup>\n        <InfoTooltip isOpen={isInfoTooltip} infoPopup={infoPopup} onClose={closeAllPopups}></InfoTooltip>\n      </CurrentUserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}